<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>PKIX Validation Sengrid-Java :: The Official Site of ngurajeka — an ordinary ceo</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Have you ever use Sendgrid? Well, let me tell you my story using Sendgrid.
In the last few days, my team were develop a notification system. The notification is an Email Service which is using Sendgrid as the Provider. We use the Sendgrid API to communicate with Sendgrid.
Well, in one of our clients we started testing and let them try the Notification system. They are testing it with many scenarios."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://ngurajeka.com/post/pkix-validation-sengrid-java/" />


<link rel="stylesheet" href="https://ngurajeka.com/assets/style.css">


<link rel="stylesheet" href="https://ngurajeka.com/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ngurajeka.com/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://ngurajeka.com/img/favicon.png">


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="PKIX Validation Sengrid-Java :: The Official Site of ngurajeka — an ordinary ceo" />
<meta name="twitter:description" content="Have you ever use Sendgrid? Well, let me tell you my story using Sendgrid.
In the last few days, my team were develop a notification system. The notification is an Email Service which is using Sendgrid as the Provider. We use the Sendgrid API to communicate with Sendgrid.
Well, in one of our clients we started testing and let them try the Notification system. They are testing it with many scenarios." />
<meta name="twitter:site" content="https://ngurajeka.com/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="PKIX Validation Sengrid-Java :: The Official Site of ngurajeka — an ordinary ceo">
<meta property="og:description" content="Have you ever use Sendgrid? Well, let me tell you my story using Sendgrid.
In the last few days, my team were develop a notification system. The notification is an Email Service which is using Sendgrid as the Provider. We use the Sendgrid API to communicate with Sendgrid.
Well, in one of our clients we started testing and let them try the Notification system. They are testing it with many scenarios." />
<meta property="og:url" content="https://ngurajeka.com/post/pkix-validation-sengrid-java/" />
<meta property="og:site_name" content="PKIX Validation Sengrid-Java" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-01-30 15:17:48 &#43;0700 &#43;07" />









</head>
<body class="dark-theme">
<div class="container">
  <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">ngurajeka</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/screencast">Screencast</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/screencast">Screencast</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


  <div class="content">
    
  <div class="post">
    <h2 class="post-title"><a href="https://ngurajeka.com/post/pkix-validation-sengrid-java/">PKIX Validation Sengrid-Java</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2019-01-30
        </span>
      
      
      
        <span class="post-read-time">— 3 min read</span>
      
    </div>

    

    

    <div class="post-content">
      <p>Have you ever use Sendgrid? Well, let me tell you my story using Sendgrid.</p>

<p>In the last few days, my team were develop a notification system. The notification is an Email Service which is using Sendgrid as the Provider. We use the Sendgrid API to communicate with Sendgrid.</p>

<p>Well, in one of our clients we started testing and let them try the Notification system. They are testing it with many scenarios. Lots of it. One of them is by switching dates backwards and forwards, and this is where it&rsquo;s gone wrong.</p>

<p>Spesifically, their moving the system dates into May 15 and when they are trying to send the email it&rsquo;s not processed by system. And we got an error saying &ldquo;PKIX path validation failed: java.security.check.CErtPathValidatorException: validity check failed&rdquo;.</p>

<p>Well, at first we though because our server is isolated and has limited access to the outside world then maybe it&rsquo;s the problem. Well, we were wrong. LOL!</p>

<p>Then, we try to send an email from our cloud server. It&rsquo;s successfull, and you know what? This makes the debugging process a lot more harder. We started to blame the server. LOL! And spend a few days just to find which one is the root-cause.</p>

<p>At the time, we didn&rsquo;t really sure what we miss. We already move the system dates, backwards and forwards before and it&rsquo;s not a problem. So why its happening right know?</p>

<p>Last night, i have a little chat with our clients about the problem. And started to focusing the finding on the server configuration or the infrastructure. It might be a difference, between servers that we are using for testing.</p>

<p>So in the morning, i tried to create a simple jar application just to send an email using Sendgrid-Java library. I called the project, tehpucuk. Hahaha</p>

<p>I tried on 4 machine:</p>

<ul>
<li>Server 1 using system date : May 15 -&gt; failed to send -&gt; PKIX validation error</li>
<li>Server 2 using system date : March 28 -&gt; failed to send -&gt; PKIX validation error</li>
<li>Server 3 (cloud) using system date : January 25 -&gt; succeed</li>
<li>Server 4 which is my local machine : January 30 -&gt; succeed</li>
</ul>

<p>On the server 1 and server 2, it is displaying the stacktrace and we managed to find the root-casue immidiately, and try new case:</p>

<ul>
<li>Server 1 using system date : May 15 -&gt; failed to send -&gt; PKIX validation error</li>
<li>Server 2 using system date : January 15 (random pick) -&gt;  succeed</li>
<li>Server 3 (cloud) using system date : May 15 -&gt; failed to send -&gt; PKIX validation error</li>
<li>Server 4 which is my local machine : January 30 -&gt; succeed</li>
</ul>

<p>From above cases, we decided that the problem is because the system dates is greater than the expiry date of the SSL Certificate of Sendgrid. The SSL Certificate will be expired soon at 28 February 2019. LOL</p>

<p>If you are using Sendgrid and have the same problem when testing the same case, hope above explanation will help you.</p>

<p>Happy Hacking!</p>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="https://ngurajeka.com/post/how-to-make-yourself-efficient/">
                <span class="button__icon">←</span>
                <span class="button__text">How to Make Yourself Efficient</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="https://ngurajeka.com/post/force-nginx-to-disable-cache/">
                <span class="button__text">Force Nginx to Disable Cache</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" width="44" height="44" viewBox="0 0 44 44">
  <polyline fill="none" stroke="#000" stroke-width="2" points="15 8 29.729 22.382 15 35.367"/>
</svg>
</span>
    <span class="logo__text">ngurajeka</span>
    <span class="logo__cursor"></span>
  
</a>

      <div class="copyright">
        <span>© 2019 Powered by <a href="https://gohugo.io">Hugo</a></span>
        <span>Theme created by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://ngurajeka.com/assets/main.js"></script>
<script src="https://ngurajeka.com/assets/prism.js"></script>


  
</div>

</body>
</html>
